<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:p="http://primefaces.org/ui"
xmlns:subject="http://java.sun.com/jsf/composite/subject"
xmlns:d="http://java.sun.com/jsf/composite/document"
xmlns:ui="http://java.sun.com/jsf/facelets">
   
<h:body>
  <ui:composition template="masterlayout.xhtml">
  <ui:define name="content">
      <h2 style="text-align: center"><h:outputText value="#{message.opportunities_headline}" /></h2>
	  <h:panelGrid id="page" columns="1" styleClass="positionCentered">
		  <h:form>
			    
			   <h:panelGrid id="search" columns="5" styleClass="centered">
			      <p:outputLabel for="opportunityPager" value="#{message.opportunities_page_prefix}[1...#{opportunitiesModel.paging.maxPages}]" />
			      <p:spinner id="opportunityPager"   min="1" max="#{opportunitiesModel.paging.maxPages}" size="#{opportunitiesModel.paging.maxPages}"  value="#{opportunitiesModel.paging.currentPage}"/> 
			      <p:outputLabel for="namePattern" value="#{message.opportunities_search_label}" />
			      <p:inputText id="namePattern"  value="#{opportunitiesModel.pattern}"  >
			 	     <p:ajax event="change" update="@this"  process="@this"/>
			      </p:inputText>
                  <p:commandButton id="paging" value="suchen"     update="@form" process="@parent"   action="#{opportunityController.opportunities()}"  />     
               </h:panelGrid>        
			
			   <p:dataTable  id="opportunities" var="opportunityVar" paginator="false" rows="#{opportunitiesModel.paging.pageSize}"   value="#{opportunitiesModel.opportunities}"  selection="#{opportunitiesModel.selected}"  >  
			   	   <p:column selectionMode="single" style="width:2%" />  
                   <p:column headerText="#{message.opportunities_table_column_name}">#{opportunityVar.name}</p:column> 
                   <p:column headerText="#{message.opportunities_table_column_description}">#{opportunityVar.description}</p:column>  
                   <p:ajax event="rowSelectRadio"  update="@form" process="@this"/> 
			   </p:dataTable>
	
			   <h:panelGrid id="buttonPanel" columns="4" >
			     
			      <p:commandButton id="addButton"  action="#{opportunityController.create()}"  value="#{message.opportunities_add_button}"   style="float:left" />
			     
			     
			    
			      <p:button  value="#{message.opportunities_document_button}"  outcome="uploadDocument.xhtml"  rendered="#{not empty opportunitiesModel.selected}"   update="@form"  process="@this,opportunities"  >
			      		<f:param name="page" value="opportunities.xhtml" />
			      		<f:param name="documentId" value="#{opportunitiesModel.selected.id}" />
			      		
			      </p:button>  
			       <p:commandButton id="changeButton"  action="#{opportunityController.change()}"  value="#{message.opportunities_change_button}"  update="@form"  process="@this,opportunities"  rendered="#{not empty opportunitiesModel.selected}"  />
			      <p:commandButton id="deleteButton"  action="#{opportunityController.delete()}"  value="#{message.opportunities_delete_button}"  update="@form"  process="@this,opportunities"  rendered="#{not empty opportunitiesModel.selected}"  />
			   </h:panelGrid>
		
		
		    
			</h:form>
			
				
			
		</h:panelGrid>
		   
   </ui:define>
    	
   </ui:composition>
</h:body>
</html>


