<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:p="http://primefaces.org/ui"
xmlns:subject="http://java.sun.com/jsf/composite/subject"
xmlns:ui="http://java.sun.com/jsf/facelets">


<h:body>
  <ui:composition template="masterlayout.xhtml">
  <ui:define name="content">
      <h2 style="text-align: center"><h:outputText value="#{message.opportunity_headline}" /></h2>
	  <h:form>
	 
	 <h:panelGrid columns="1" styleClass="positionCentered">
	  <h:panelGrid  columns="3" columnClasses="labelColumnStyle,inputColumnStyle,messageColumnStyle" >
		 
		  
		  
		  		<p:outputLabel id="nameLabel" for="name" value="#{message.opportunity_name}" />  
                <p:inputText id="name" label="name"  value="#{opportunity.name}" styleClass="gridInputField" >  
                    	<f:validateBean />
                
                </p:inputText>
                <p:message for="name" display="text" />
                
                <p:outputLabel  for="description" value="#{message.opportunity_description}" />  
                <p:inputTextarea  id="description" value="#{opportunity.description }" style="width:100%" >
						<f:validateBean />
				</p:inputTextarea >
		  		<p:message for="description" display="text" />
		  		
		  		
		  		<p:outputLabel  for="kind" value="#{message.opportunity_kind}" />  
                
                <p:selectOneMenu  id="kind" value="#{opportunity.kind}"  style="width:100%"  >  
                      				 <f:selectItem itemLabel="#{message.select_empty}" itemValue=" " />
            							<f:selectItem itemLabel="#{message.opportunity_kind_product}" itemValue="ProductOrService" />  
            						<f:selectItem itemLabel="#{message.opportunity_kind_offer}" itemValue="Offer" />  
            						<f:selectItem itemLabel="#{message.opportunity_kind_tender}" itemValue="Tender" />  
           							<f:validateBean />
           							
		
        		</p:selectOneMenu >  
                
		  		<p:message for="kind" display="text" />
		  		
		  		<p:outputLabel  for="activities" value="#{message.opportunity_activities}" /> 
		  		
		  		
		  		<p:tree id="activities" style="width:100%;height:200px"    dynamic="true"   value="#{activityClassifications.treeNode}" var="node"    selectionMode="checkbox"   >  
  
        			<p:treeNode>  
            			<h:outputText value="#{node}" >
            					<f:converter converterId="classificationConverter" />
            			</h:outputText>  
            		 
        			</p:treeNode>  
        			  <p:ajax listener="#{opportunityController.onActivityNodeSelect}" update="@this" event="select"/>
        			 
    			</p:tree>  
  			<p:message for="activities" display="text" />
		  		
		  		
		  
		  	
		  	
		  	<p:outputLabel  for="products" value="#{message.opportunity_products}" /> 
		  		
		  		
		  		<p:tree id="products" style="width:100%;height:200px"    dynamic="true"   value="#{productClassifications.treeNode}" var="node"    selectionMode="checkbox"   >  
  
        			<p:treeNode>  
            			<h:outputText value="#{node}" >
            					<f:converter converterId="classificationConverter" />
            			</h:outputText>  
            		 
        			</p:treeNode>  
        			  <p:ajax listener="#{opportunityController.onProductNodeSelect}" update="@this" event="select"/>
        			 
    			</p:tree>  
  			
		  		
		  	<p:message for="products" display="text" />
		  	
		  	<p:outputLabel  for="keywords" value="#{message.opportunity_keyword}" /> 
		  	<h:panelGrid id="keywords">
		  		<p:dataTable  id="keywordTable" var="keyWordVarVar" paginator="false"   value="#{opportunity.keyWords}"  selection="#{opportunity.selectedKeyWord}"  >  
			   	   <p:column selectionMode="single" style="width:2%" />  
                   <p:column headerText="#{message.keyword_table_column_name}">#{keyWordVarVar}</p:column> 
                 
                   <p:ajax event="rowSelectRadio"  update="@form" process="@this"/> 
			   </p:dataTable>
		  	
		  	
		  	</h:panelGrid>
		  	
		  	<p:message for="keywords" display="text" />
 </h:panelGrid>
 
 <p:commandButton id="#{message.opportunity_save}" value="speichern" action="#{opportunityController.save()}"
						icon="ui-icon-check"
						
						style="float:right"   update="@form"/>
 </h:panelGrid>

 </h:form>
 </ui:define>
 </ui:composition>
 </h:body>
 
 
 
 
 </html>
 