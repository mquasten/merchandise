<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:p="http://primefaces.org/ui"
xmlns:ui="http://java.sun.com/jsf/facelets">
   

  
  <f:metadata>
      	
      	<f:viewParam name="selectMode" value="#{pageModel.selectMode}" /> 	
      
     	
  	</f:metadata>

  <ui:composition template="masterlayout.xhtml" >
  
  <ui:define name="content">
      <h2 style="text-align: center"><h:outputText value="#{message.document_title}" /></h2>
	   <h:form>
	  <h:panelGrid id="page" columns="1" styleClass="positionCentered">
		  
		
	
		
  		
  	
       
        <h:panelGrid id="inputGrid" columns="1"  columnClasses="labelColumnStyle,inputColumnStyle,messageColumnStyle"   style="margin-bottom:10px">  
           
         
            
			 
			 
			 <p:dataTable  id="documentTable" var="documentVar" paginator="false"     value="#{documentModel.documents}"  selection="#{documentModel.selected}" >  
			   	   <p:column selectionMode="single" style="width:2%" />  
                  
                   
                   <p:column headerText="#{message.document_attachements}">
                   
                  
					<h:outputText value="#{documentVar}"/> 
					
					
					
                  </p:column>
                  
                
                 
                   <p:ajax  event="rowSelectRadio"  update="documentTable" process="documentTable"   />
                  
                 
                     
                     <f:param  name="documentId" value="#{documentModel.document.id()}"/>
                  
                    <f:param  name="page" value="#{documentModel.returnFromUpload}"/>
                  
                   
			   <f:facet name="footer">   
			   
			   
			   			 
                        
    					<p:button value="#{message.document_show_button}"   outcome="showDocument.xhtml"   rendered="#{not empty documentModel.selected}"   process="@this documentTable"  update="documentTable @this" >
    						<f:param  name="documentId" value="#{documentModel.document.id()}"/>
    						<f:param  name="page" value="#{documentModel.returnFromUpload}"/>
    						<f:param  name="selected" value="#{documentModel.selected}"/>
    						<f:param  name="returnPage" value="uploadDocument.xhtml"/>
    					</p:button>
		  	            <p:commandButton id="deleteAttachement"    value="#{message.document_delete_button}" action="#{documentController.removeAttachement}"   process="@this documentTable"  update="documentTable @this"   rendered="#{not empty documentModel.selected}"  />      
			 		
			  </f:facet>
			   
			   </p:dataTable>
			 
		
		    
		  <p:fileUpload update="@form"  id="fileupload" label="#{message.document_upload_button}"    fileUploadListener="#{documentController.addAttachement}"  dragDropSupport="false"  
                   sizeLimit="2000000"  allowTypes="/(\.|\/)(gif|jpe?g|png|pdf)$/" invalidSizeMessage="#{message.document_invalid_size_message}"     invalidFileMessage="#{message.document_wrong_file_message}"  auto="true"   >  
			 
		 
		 </p:fileUpload>
		
			 
         <h:panelGrid  columns="3">
          <h:outputLabel  for="webLink" value="#{message.document_web_link_label}" />  
			    		    <p:inputText  id="webLink"     value="#{documentModel.link}"  >
			    		      <p:ajax update="addLink" event="keyup"  />
			    		       <f:param  name="documentId" value="#{documentModel.document.id()}"/>
                  
                    			<f:param  name="page" value="#{documentModel.returnFromUpload}"/>
			    		    </p:inputText> 
			    		    <h:panelGrid id="addLink">
			  				<p:commandButton  value="#{message.document_add_link_button}" action="#{documentController.addLink}"   process="inputGrid"  update="@form"   rendered="#{not empty documentModel.link}"  />    
			  				</h:panelGrid>
         </h:panelGrid>   
         
         
        </h:panelGrid>  
        
        
        
  
         
              
  	

		  
		
		  
	
	 <f:facet name="footer">
             <p:button   outcome="#{documentModel.returnFromUpload}" value="#{message.document_cancel_button}" style="float:left" process="@this"  update="@this"  />
         
             
         </f:facet>    
   
   </h:panelGrid>
	</h:form>	   
   </ui:define>
    	
   </ui:composition>

</html>