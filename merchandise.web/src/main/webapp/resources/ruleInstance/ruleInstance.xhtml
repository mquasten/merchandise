<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:u="http://example.com/functions"
	xmlns:composite="http://java.sun.com/jsf/composite">
<head>

<title>Input for a ruleInstance</title>
</head>
<body>

	<composite:interface>
		<composite:attribute name="message" required="true" />
		
		<composite:attribute name="addAction" method-signature="void f()" />  
		
		<composite:attribute name="deleteAction" method-signature="void f()" />  
		
		
	</composite:interface>

	<composite:implementation>
	<p:dialog header="#{cc.attrs.message.rule_instance_title}" widgetVar="ruleInstanceDlg" modal="true" >  
	
		<p:ajax event="close" update="@form"  />
  		
  		
      
        <h:panelGrid id="inputGrid" columns="3"  columnClasses="labelColumnStyle,inputColumnStyle,messageColumnStyle"   style="margin-bottom:10px">  
          
          
           <h:outputLabel  for="instances" value="#{cc.attrs.message.rule_instances}" />  
           
           <p:dataTable var="instanceVar" id="instances" paginator="false"  value="#{ruleController.instances()}"   selection="#{ruleInstance.selected}" >
            
            <p:column selectionMode="single" style="width:2%" />   
            
           
           <p:column> 
            <f:facet name="header">  
                #{cc.attrs.message.ruletable_name}
            </f:facet>  
           
             <h:outputText  value="#{instanceVar.rule().name()}">
            	
            </h:outputText>
              
           </p:column>
           
           <p:column>
           <f:facet name="header">  
                #{cc.attrs.message.ruletable_priority}
            </f:facet>  
            <h:outputText  value="#{instanceVar.priority()}"/>
           </p:column>
           
           <p:column>
           <f:facet name="header">  
                #{cc.attrs.message.ruletable_parameters}
            </f:facet>  
           
            <h:outputText  value="#{instanceVar}">
              <f:converter converterId="ruleInstanceToParameterConverter"   />
            </h:outputText>
           </p:column>
            <p:ajax event="rowSelectRadio"  update="@parent" process="@this"/> 
           </p:dataTable>
           
           
           
           
         <p:message for="instances" display="text" />
            
            
            <h:outputLabel  for="rules" value="#{cc.attrs.message.rule_instance_rules}" />  
            
          
          <h:panelGrid id="rulesGrid" >
            
            <h:panelGrid columns="3">
            <p:selectOneMenu  id="rules"  value="#{ruleInstance.selectedId}"  style="width:100%"  >
						
						 <f:selectItem itemLabel="#{message.select_empty}" itemValue="" />  
						<f:selectItems
							value="#{ruleController.ruleItems()}" />  />
			
			 <p:ajax update="inputGrid"  process="@this" />		
			 
			
			</p:selectOneMenu>
			  <p:message id="rulesMessage" for="rules" display="text" />
			  <p:messages errorClass="error" globalOnly="true" />  
			</h:panelGrid>
		
		<p:dataTable  var="parameterVar" paginator="false"  value="#{ruleInstance.parameter}"   >
		
			 <p:column>
			  <f:facet name="header">  
                #{cc.attrs.message.parametertable_name}
            </f:facet>  
			 #{parameterVar.name}
			 </p:column> 
			 
			 <p:column>
			 <f:facet name="header">  
                #{cc.attrs.message.parametertable_value}
            </f:facet> 
			 <p:inputText  id="parameterValue" value="#{parameterVar.value}" >
			 <f:validateBean />
			 </p:inputText> 
			   <p:message for="parameterValue" display="text" />
			</p:column>
		
		   
		
		</p:dataTable>
		
		<h:panelGrid columns="2">
			<h:outputLabel  value="#{cc.attrs.message.rule_priority}" />  
			<p:inputText  value="#{ruleInstance.priority}" />
			
		</h:panelGrid>
		 <f:facet name="footer">
		 	 <p:commandButton   value="#{cc.attrs.message.rule_instance_delete_parameter}"  action="#{cc.attrs.deleteAction}"   process="inputGrid"  update="inputGrid"    style="float:left" />   
		     <p:commandButton   value="#{cc.attrs.message.rule_instance_add_parameter}" action="#{cc.attrs.addAction}"  process="rulesGrid"  update="inputGrid"    style="float:right" />     
           <p:messages  globalOnly="false" />  
        </f:facet> 
         </h:panelGrid>	 		
          
           
             
             
			 
			 
		
			 
			 
			 
            
            <f:facet name="footer">
                <p:button   value="#{cc.attrs.message.rule_instance_cancel}" outcome="/opportunity.xhtml"  process="inputGrid"  update="inputGrid"  />     
                
                
            </f:facet>
        
        </h:panelGrid>  
  
         
              
  
</p:dialog>  
	
	
	
	</composite:implementation>
</body>
</html>