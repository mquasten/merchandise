<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:d="http://java.sun.com/jsf/composite/document"
	xmlns:u="http://example.com/functions"
	xmlns:composite="http://java.sun.com/jsf/composite">
<head>

<title>Input for an attachement a document</title>
</head>
<body>

	<composite:interface>
		<composite:attribute name="message" required="true" />
		
		
		
	</composite:interface>

	<composite:implementation>
	<p:dialog header="#{cc.attrs.message.document_title}" widgetVar="documentDlg" modal="true" >  
	
		
  		
  	
       
        <h:panelGrid id="inputGrid" columns="1"  columnClasses="labelColumnStyle,inputColumnStyle,messageColumnStyle"   style="margin-bottom:10px">  
           
         
            
			 
			 
			 <p:dataTable  id="documentTable" var="documentVar" paginator="false"   value="#{documentModel.documents}"  selection="#{documentModel.selected}" >  
			   	   <p:column selectionMode="single" style="width:2%" />  
                  
                   
                   <p:column headerText="#{message.document_attachements}">
                   
                  
					<h:outputText value="#{documentVar}"/> 
					
					
					
                  </p:column>
                  
                
                 
                   <p:ajax event="rowSelectRadio"  update="@this,documentTable" process="@this"/> 
                   
			   <f:facet name="footer">   
			   
			   
			   			 
                        
    					<p:commandButton value="show"     action="#{documentController.size(documentModel.selected)}" rendered="#{not empty documentModel.selected}" oncomplete="showDocumentDlg.show();"  process="@this documentTable"  update="documentTable @this" />
    					 
    					 <d:showDocument message="#{message}" url="#{documentController.url(documentModel.selected)}" width="#{documentModel.width}" height="#{documentModel.height}" />
        					
    				
    					
        				
			   				
		  	              <p:commandButton id="deleteDocument"    value="#{message.document_delete_button}" action="#{documentController.removeAttachement}"   process="@this documentTable"  update="documentTable @this"   rendered="#{not empty documentModel.selected}"  />      
			 		
			  </f:facet>
			   
			   </p:dataTable>
			 
		
		    
		  <p:fileUpload update="inputGrid"  id="fileupload" label="Datei"  cancelLabel="abbrechen" uploadLabel="hochladen"  fileUploadListener="#{documentController.addOpportunityAttachement}"  dragDropSupport="false"  
                   sizeLimit="2000000"  allowTypes="/(\.|\/)(gif|jpe?g|png|pdf)$/"   fileLimitMessage="Nur ein File darf hochgeladen werden"  invalidFileMessage="Falscher Datei-Typ"  auto="true"   >  
			 
		 
		 </p:fileUpload>
		
			 
         <p:panelGrid columns="3">
          <h:outputLabel  for="webLink" value="#{cc.attrs.message.document_web_link_label}" />  
			    		    <p:inputText  id="webLink"     value="#{documentModel.selected}" /> 
			  				<p:commandButton id="addLink"    value="#{message.document_add_link_button}" action="#{documentController.addLink}"   process="inputGrid"  update="inputGrid"     />    
         </p:panelGrid>   
            
        </h:panelGrid>  
        
        
        
  
         
              
  
</p:dialog>  
	
	</composite:implementation>
</body>
</html>