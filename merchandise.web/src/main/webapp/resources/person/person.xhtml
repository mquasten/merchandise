<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
		xmlns:f="http://java.sun.com/jsf/core"
	   xmlns:p="http://primefaces.org/ui"
	    xmlns:u="http://example.com/functions"
	    xmlns:contact="http://java.sun.com/jsf/composite/contact"
      xmlns:composite="http://java.sun.com/jsf/composite">
<head>

<title>Input for a person, a natural or a legal person</title>
</head>
<body>

<composite:interface>
    <composite:attribute name="person" required="true"/>
     <composite:attribute name="customer" required="true"/>
    <composite:attribute name="user" required="true"/>
     <composite:attribute name="message" required="true"/>
      <composite:attribute name="contactModel" required="true"/>
</composite:interface>



<composite:implementation>



     <p:panelGrid columns="2"  >

    <p:panel >
    
	<p:panelGrid  id="legalPersonGrid" columns="3"  columnClasses="labelColumnStyle,inputColumnStyle,messageColumnStyle"    rendered="#{u:isLegalPerson(cc.attrs.person)}">  
	
                <f:facet name="header">#{cc.attrs.message.person_customer_headline}</f:facet>
                 <p:outputLabel id="legalFormLabel" for="legalForm" value="#{cc.attrs.message.person_legalperson_legalForm}"   />
                 
                    <p:selectOneMenu id="legalForm" value="#{cc.attrs.person.legalForm}"   style="width: 100%" > 
                    <f:selectItem itemLabel="#{cc.attrs.message.select_empty}" itemValue="" />
                    <f:selectItem itemLabel="#{cc.attrs.message.person_legal_form_eK}" itemValue="eK" />
                    <f:selectItem itemLabel="#{cc.attrs.message.person_legal_form_OHG}" itemValue="OHG" />
                    <f:selectItem itemLabel="#{cc.attrs.message.person_legal_form_KG}" itemValue="KG" />
                    <f:selectItem itemLabel="#{cc.attrs.message.person_legal_form_GbR}" itemValue="GbR" />
                    <f:selectItem itemLabel="#{cc.attrs.message.person_legal_form_AG}" itemValue="AG" />
                    <f:selectItem itemLabel="#{cc.attrs.message.person_legal_form_KGaA}" itemValue="KGaA" />
                    
					<f:selectItem itemLabel="#{cc.attrs.message.person_legal_form_GmbH}" itemValue="GmbH" />
					<f:selectItem itemLabel="#{cc.attrs.message.person_legal_form_GmbHCoKG}" itemValue="GmbHCoKG" />
					
 					<f:selectItem itemLabel="#{cc.attrs.message.person_legal_form_eG}" itemValue="eG" />
 					<f:selectItem itemLabel="#{cc.attrs.message.person_legal_form_SE}" itemValue="SE" />
	
					<f:selectItem itemLabel="#{cc.attrs.message.person_legal_form_EPG}" itemValue="EPG" />
					<f:selectItem itemLabel="#{cc.attrs.message.person_legal_form_EWIV}" itemValue="EWIV" />
            			<f:validateBean />
            			<p:ajax   update="@this  legalFormLabel legalFormMessage" process="@parent"/>
        			</p:selectOneMenu>  
        			<p:message id="legalFormMessage"  for="legalForm" display="text"  />
                
                  <p:outputLabel id="nameLabel" for="name" value="#{cc.attrs.message.person_legalperson_name}" />  
                
               
                
                    <p:inputText id="name" label="name"  value="#{cc.attrs.person.name}" styleClass="gridInputField" >  
                    	<f:validateBean />
                    	<p:ajax event="change" update="@this nameLabel nameMessage"  process="@this"/>
                    </p:inputText>
                    <p:message id="nameMessage" for="name" display="text" />
                
                      
                    <p:outputLabel id="taxIdLabel"  for="taxId" value="#{cc.attrs.message.person_legalperson_taxId}" />  
                    <p:inputText id="taxId"  label="taxId"  value="#{cc.attrs.person.taxId}"  styleClass="gridInputField" >
                    	<f:validateBean />
                    	<p:ajax event="change" update="@this taxIdLabel taxIdMessage"  process="@this"/>
                    </p:inputText>  
                    <p:message id="taxIdMessage" for="taxId"  display="text" />
                    
                      
                     <p:outputLabel id="foundationDateLabel"  for="foundationDate" value="#{cc.attrs.message.person_legalperson_foundation_date}" styleClass="gridInputField" />        
                     <p:calendar id="foundationDate" value="#{cc.attrs.person.foundationDate}"  showOn="button"   lable="foundationDate"  >
                     	<f:validateBean />
                     	<p:ajax event="change" update="@this foundationDateLabel foundationDateMessage" process="@this"/>
                     </p:calendar> 
                     <p:message id="foundationDateMessage" for="foundationDate" display="text" />
                              
   </p:panelGrid>	
        
    <p:panelGrid  id="customerPanel" columns="3"  columnClasses="labelColumnStyle,inputColumnStyle,messageColumnStyle"  rendered="#{cc.attrs.user}"  >  
    <f:facet name="header">#{cc.attrs.message.person_customer_headline}</f:facet>
    	<p:outputLabel id="customerLabel"  for="customer" value="#{cc.attrs.message.person_naturalperson_customer}" />  
    	 <p:inputText id="customer"    value="#{cc.attrs.customer.id}" styleClass="gridInputField" >
    	 	<f:validateBean />
    	 	<p:ajax event="change" update="@this customerLabel customerMessage"  process="@this"/>
    	 </p:inputText>  
    	  <p:message id="customerMessage" for="customer" display="text" />
    </p:panelGrid>     
                
   <p:panelGrid  id="naturalPerson" columns="3"  columnClasses="labelColumnStyle,inputColumnStyle,messageColumnStyle"  rendered="#{!u:isLegalPerson(cc.attrs.person)}"  >  
   	      <f:facet name="header">#{cc.attrs.message.person_person_headline}</f:facet>
   		  <p:outputLabel  id="firstnameLabel" for="firstname" value="#{cc.attrs.message.person_naturalperson_firstname}" >
   		  	
   		  </p:outputLabel>  
          <p:inputText id="firstname"    value="#{cc.attrs.person.firstName}" styleClass="gridInputField" >
          	<p:ajax event="change" update="@this firstnameLabel firstnameMessage"  process="@this"/>
          	<f:validateBean />
          
          </p:inputText>  
           <p:message id="firstnameMessage" for="firstname" display="text" />
           
          <p:outputLabel id="lastnameLabel" for="lastname" value="#{cc.attrs.message.person_naturalperson_lastname}" />  
          <p:inputText id="lastname"    value="#{cc.attrs.person.lastName}" styleClass="gridInputField" >
          		<f:validateBean />
          		<p:ajax  event="change" update="@this lastnameLabel lastnameMessage" process="@this"/>
          </p:inputText> 
           <p:message id="lastnameMessage" for="lastname" display="text" />
           
           
          <p:outputLabel id="birthDateLabel" for="birthDate" value="#{cc.attrs.message.person_naturalperson_birthdate}" styleClass="gridInputField" />        
          <p:calendar id="birthDate" value="#{cc.attrs.person.nativity.birthDate}"  showOn="button"    >
          	<f:validateBean />
          	<p:ajax event="change" update="@this birthDateLabel birthDateMessage" process="@this"/>
          </p:calendar> 
           <p:message id="birthDateMessage" for="birthDate" display="text" />
          
          
          <p:outputLabel id="birthPlaceLabel"  for="birthPlace" value="#{cc.attrs.message.person_naturalperson_birthplace}" />  
          <p:inputText id="birthPlace"    value="#{cc.attrs.person.nativity.birthPlace}" styleClass="gridInputField" >
          	<f:validateBean />
          	<p:ajax event="change" update="@this birthPlaceLabel birthPlaceMessage"  process="@this"/>
          </p:inputText> 
   	 	<p:message id="birthPlaceMessage"  for="birthPlace" display="text" />
   </p:panelGrid>
                

    <p:panelGrid id="tradeRegisterGrid" columns="3"  columnClasses="labelColumnStyle,inputColumnStyle,messageColumnStyle"  rendered="#{u:isLegalPerson(cc.attrs.person)}" >  
                 <f:facet name="header">#{cc.attrs.message.person_legalperson_tradeRegister_headline}</f:facet>
                 <p:outputLabel  id="tradeRegisterZipCodeLabel" for="tradeRegisterZipCode" value="#{cc.attrs.message.person_legalperson_tradeRegister_zipCode}" />        
                 <p:inputText id="tradeRegisterZipCode" label="tradeRegisterZipCode"  value="#{cc.attrs.person.tradeRegister.zipCode}"  styleClass="gridInputField"  >
                 		<f:validateBean />
                 		<p:ajax event="change" update="@this tradeRegisterZipCodeLabel tradeRegisterZipCodeMessage"  process="@this"/>
                 </p:inputText>
               <p:message id="tradeRegisterZipCodeMessage" for="tradeRegisterZipCode" display="text" />
               
                <p:outputLabel id="tradeRegisterCityLabel" for="tradeRegisterCity" value="#{cc.attrs.message.person_legalperson_tradeRegister_city}"  />        
                     <p:inputText id="tradeRegisterCity"  label="tradeRegisterCity"    value="#{cc.attrs.person.tradeRegister.city}" styleClass="gridInputField"  >
                     	<f:validateBean />
                     	<p:ajax event="change" update="@this tradeRegisterZipCodeLabel tradeRegisterCityMessage"   process="@this"/>
                     </p:inputText>
                <p:message  id="tradeRegisterCityMessage" for="tradeRegisterCity" display="text" />
                <p:outputLabel id="tradeRegisterReferenceLabel" for="tradeRegisterReference" value="#{cc.attrs.message.person_legalperson_tradeRegister_reference}" />        
                <p:inputText id="tradeRegisterReference"   label="tradeRegisterReference"  value="#{cc.attrs.person.tradeRegister.reference}"  styleClass="gridInputField"  >
                	<f:validateBean />
                	<p:ajax event="change" update="@this tradeRegisterReferenceLabel tradeRegisterReferenceMessage"  process="@this"/>
                </p:inputText>
                <p:message id="tradeRegisterReferenceMessage" for="tradeRegisterReference" display="text" />
      </p:panelGrid>
      
      <p:panelGrid  id="passwordGrid" columns="3"  columnClasses="labelColumnStyle,inputColumnStyle,messageColumnStyle"  >  
            <f:facet name="header">#{cc.attrs.message.person_passord_headline}</f:facet>
            <p:outputLabel id="customerPasswordLabel" for="customerPassword" value="#{cc.attrs.message.person_password_password}" />          
            <p:password id="customerPassword" value="#{cc.attrs.person.password}" label="customerPassword" styleClass="gridInputField"    redisplay="true" >
            	<f:validateBean />
            	<p:ajax event="change" update="@this customerPasswordLabel customerPasswordMessage" process="@this"/>
            </p:password>
			 <p:message id="customerPasswordMessage" for="customerPassword" display="text" />		
             <p:outputLabel id="customerPasswordConfirmedLabel"  for="customerPasswordConfirmed" value="#{cc.attrs.message.person_password_confirmation}"  />        
                  
             <p:password  id="customerPasswordConfirmed" value="#{cc.attrs.person.confirmedPassword}" label="customerPasswordConfirmed" styleClass="gridInputField"   redisplay="true">
             	<f:validateBean />
             	<p:ajax event="change" update="@this customerPasswordConfirmedLabel customerPasswordConfirmedMessage" process="@this"/>
             </p:password>
              <p:message id="customerPasswordConfirmedMessage" for="customerPasswordConfirmed" display="text" />	
                
    </p:panelGrid>
    
    </p:panel>
    
   
   
    
    <p:panel>
    <p:panelGrid columns="1"  >
    <f:facet name="header">#{cc.attrs.message.person_address_table_headline}</f:facet>
    
    <p:panelGrid columns="3" columnClasses="inputColumnStyle,labelColumnStyle" >
    <p:selectOneMenu id="addressType" value="#{cc.attrs.contactModel.addressType}"  required="true" style="width: 100%" layout="pageDirection" >  
            			<f:selectItem itemLabel="#{cc.attrs.message.person_address_address}" itemValue="Address" />  
            			<f:selectItem itemLabel="#{cc.attrs.message.person_address_postbox}" itemValue="PostBox" />  
            			
            			<p:ajax  process="addressType"  update="@form" />
            		    
    </p:selectOneMenu>  
       
       <p:commandButton value="#{cc.attrs.message.person_address_add_button}" onclick="addressDlg.show();"  type="button"    />
        
    </p:panelGrid>
    
   
     
    
    <p:dataTable id="addressTable" var="addressVar" value="#{cc.attrs.person.addresses}" scrollable="true" scrollHeight="100" resizableColumns="true"   emptyMessage="#{cc.attrs.message.person_address_emptymessage}" >  
  
        
         <p:column headerText="#{cc.attrs.message.person_address_table_kind}" >  
            <h:outputText value="#{u:translate(addressVar, cc.attrs.message)}" />  
        </p:column>  
        
        
        <p:column headerText="#{cc.attrs.message.person_address_table_content}"  >  
            <h:outputText value="#{addressVar.address.contact()}" />  
           
        </p:column> 
        
       
        
         
        
         <p:column >  
                <p:commandButton id="selectButton"  update="addressTable" icon="ui-icon-trash" title="delete" immediate="true" action="#{personController.removeAddress(cc.attrs.person.person, addressVar.address)}" />  
                  
        </p:column>  
    </p:dataTable>  
    
   
   
    </p:panelGrid>
    
    
    <p:panelGrid columns="1"  >
    <f:facet name="header">#{cc.attrs.message.person_contact_table_headline}</f:facet>
    
    <p:panelGrid columns="2" columnClasses="inputColumnStyle,labelColumnStyle" >
    <p:selectOneMenu id="contactType" value="#{cc.attrs.contactModel.contactType}"  required="true" style="width: 100%" layout="pageDirection" >  
            			 
            			<f:selectItem itemLabel="#{cc.attrs.message.person_contact_email}" itemValue="EMail" />   
            			<f:selectItem itemLabel="#{cc.attrs.message.person_contact_telefon}" itemValue="Phone" />
            			<f:selectItem itemLabel="#{cc.attrs.message.person_contact_messenger}" itemValue="Messenger" />   
            			
            			
            			<p:ajax  process="contactType"  update="@form" />
        			</p:selectOneMenu>  
      
       
       <p:commandButton value="#{cc.attrs.message.person_contact_add_button}" onclick="contactDlg.show();"   type="button"  />
    
    </p:panelGrid>
   
 

   <p:dataTable var="contactVar" value="#{cc.attrs.person.contacts}" scrollable="true" scrollHeight="100" resizableColumns="true" id="contactTable"  emptyMessage="#{cc.attrs.message.person_contact_emptymessage}" >  
  
        <p:column headerText="#{cc.attrs.message.person_contact_table_kind}"  >  
            <h:outputText value="#{u:translate(contactVar, cc.attrs.message)}" />  
        </p:column> 
        
        <p:column headerText="#{cc.attrs.message.person_contact_table_content}" >  
            <h:outputText value="#{contactVar.contact.contact()}" />  
        </p:column>  
        <p:column headerText="#{cc.attrs.message.person_contact_table_login}" >  
            <h:outputText value="#{cc.attrs.message.person_contact_table_login_yes}" rendered="#{contactVar.loginContact}"  />  
             <h:outputText value="#{cc.attrs.message.person_contact_table_login_no}" rendered="#{!contactVar.loginContact}"  />  
        </p:column>  
        
        
        <p:column >  
                <p:commandButton id="selectButton"  update="contactTable" icon="ui-icon-trash" title="delete" immediate="true"  action="#{personController.removeContact(cc.attrs.person.person, contactVar.contact)}" />  
        </p:column>  
        
        
    </p:dataTable>  
   
    </p:panelGrid>
   
   
    
    
    </p:panel>
    
   </p:panelGrid>      
  
   
 <contact:address id="addressDialog"  contactModel="#{cc.attrs.contactModel}"  person="#{cc.attrs.person}" message="#{message}"/>
<contact:contact id="contactDialog"  contactModel="#{cc.attrs.contactModel}"  person="#{cc.attrs.person}" message="#{message}"/>
     
</composite:implementation>

</body>

</html>